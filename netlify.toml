[[redirects]]
  from = "https://ethproofs.com/*"
  to = "https://ethproofs.org/:splat"
  status = 301
  force = true

# Edge-level rate limiting for DDoS protection
# These rules block at the edge before reaching serverless functions

# Permissive for read-only proofs list
[[rate_limiting]]
  paths = ["/api/v0/proofs"]
  limit_per_ip = 10000
  actions = [{type = "block"}]

# Strict limit on proof write endpoints
[[rate_limiting]]
  paths = ["/api/v0/proofs/proved", "/api/v0/proofs/proving", "/api/v0/proofs/queued"]
  limit_per_ip = 60
  actions = [{type = "block"}]

# Strict limit on proof downloads
[[rate_limiting]]
  paths = ["/api/v0/proofs/download/*"]
  limit_per_ip = 100
  actions = [{type = "block"}]

# General rate limit on other API endpoints
[[rate_limiting]]
  paths = ["/api/*"]
  limit_per_ip = 30
  actions = [{type = "block"}]
